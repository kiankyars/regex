Adding first-char optimization for search and expanding edge case test coverage.
